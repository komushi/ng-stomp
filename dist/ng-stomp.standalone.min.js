/**
 * ngStomp
 *
 * @version 0.5.0
 * @author Maik Hummel <m@ikhummel.com>
 * @license MIT
 */
/*global
    angular, SockJS, Stomp */
!function(a){"use strict";"object"==typeof exports?
// Node/CommonJS
module.exports=a("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof SockJS?SockJS:require("SockJS"),"undefined"!=typeof Stomp?Stomp:require("Stomp")):"function"==typeof define&&define.amd?
// AMD. Register as an anonymous module.
define(["angular","SockJS","Stomp"],a):
// Browser globals
a(angular,SockJS,Stomp)}(function(a,b,c){a.module("ngStomp",[]).service("$stomp",["$rootScope","$q",function(a,d){function e(){return this.stomp&&this.stomp.connected}this.sock=null,this.stomp=null,this.debug=null,this.setDebug=function(a){this.debug=a},this.connect=function(a,e){e=e||{};var f=d.defer();return this.sock=new b(a),this.stomp=c.over(this.sock),this.stomp.debug=this.debug,this.stomp.connect(e,function(a){f.resolve(a)},function(a){f.reject(a)}),f.promise},this.disconnect=function(){var a=d.defer();return e()?this.stomp.disconnect(a.resolve):a.resolve(),a.promise},this.subscribe=this.on=function(a){var b=d.defer();return this.stomp.subscribe(a,function(a){b.notify(a)},function(a){b.reject(a)}),b.promise},this.unsubscribe=this.off=function(a){a.unsubscribe()},this.send=function(a,b,c){var e=d.defer();try{var f=JSON.stringify(b);c=c||{},this.stomp.send(a,c,f),e.resolve()}catch(g){e.reject(g)}return e.promise}}])});